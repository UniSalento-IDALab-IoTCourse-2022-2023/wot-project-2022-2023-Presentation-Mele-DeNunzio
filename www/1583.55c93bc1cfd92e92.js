"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1583],{1583:(U,g,s)=>{s.r(g),s.d(g,{MainPagePageModule:()=>J});var r=s(6814),_=s(95),a=s(5548),m=s(4670),i=s(6689),p=s(5495),u=s(845),x=s(4856);function f(t,o){if(1&t&&(i.TgZ(0,"ion-select-option",8),i._uU(1),i.qZA()),2&t){const e=o.$implicit;i.s9C("value",e.boxID),i.xp6(1),i.Oqu(e.boxName)}}function d(t,o){if(1&t){const e=i.EpF();i.TgZ(0,"ion-item")(1,"ion-select",4),i.NdJ("ionChange",function(l){i.CHM(e);const c=i.oxw();return i.KtG(c.onBoxSelect(l))}),i.TgZ(2,"div",5),i._uU(3,"Scegli Box"),i._UZ(4,"ion-text",6),i.qZA(),i.YNc(5,f,2,2,"ion-select-option",7),i.qZA()()}if(2&t){const e=i.oxw();i.xp6(5),i.Q6J("ngForOf",e.boxServices.allBox)}}function h(t,o){if(1&t&&(i.TgZ(0,"ion-item")(1,"h2"),i._uU(2),i.qZA()()),2&t){const e=i.oxw();i.xp6(2),i.hij("Box selezionata: ",e.selectedBox.boxName,"")}}function T(t,o){if(1&t){const e=i.EpF();i.TgZ(0,"ion-button",10),i.NdJ("click",function(){i.CHM(e);const l=i.oxw(2);return i.KtG(l.start())}),i._uU(1,"Inizio Corsa"),i.qZA()}}function P(t,o){if(1&t){const e=i.EpF();i.TgZ(0,"ion-button",10),i.NdJ("click",function(){i.CHM(e);const l=i.oxw(2);return i.KtG(l.reset())}),i._uU(1,"Fine Corsa"),i.qZA()}}function v(t,o){if(1&t&&(i.TgZ(0,"span"),i._UZ(1,"br"),i.TgZ(2,"h1"),i._uU(3),i.ALo(4,"date"),i.qZA(),i._UZ(5,"br")(6,"br"),i.YNc(7,T,2,0,"ion-button",9),i._UZ(8,"br"),i.YNc(9,P,2,0,"ion-button",9),i.qZA()),2&t){const e=i.oxw();i.xp6(3),i.Oqu(i.xi3(4,3,e.elapsedTime,"mm:ss.SSS")),i.xp6(4),i.Q6J("ngIf",e.startAndStop),i.xp6(2),i.Q6J("ngIf",!e.startAndStop)}}function Z(t,o){if(1&t&&(i.TgZ(0,"ion-item")(1,"ion-label",6),i._uU(2),i.qZA()()),2&t){const e=i.oxw().$implicit;i.xp6(2),i.lnq("Type: ",e.type," - Value: ",e.value," - Time: ",e.time,"")}}function b(t,o){if(1&t&&(i.TgZ(0,"ion-list"),i.YNc(1,Z,3,3,"ion-item",3),i.qZA()),2&t){const e=o.$implicit,n=i.oxw().$implicit;i.xp6(1),i.Q6J("ngIf",n.id==e.routeId)}}function M(t,o){if(1&t&&(i.TgZ(0,"ion-accordion",8)(1,"ion-item",11)(2,"ion-label"),i._uU(3),i.qZA()(),i.TgZ(4,"div",12),i.YNc(5,b,2,1,"ion-list",13),i.qZA()()),2&t){const e=o.$implicit,n=i.oxw(2);i.s9C("value",e.id),i.xp6(3),i.AsE("",e.data," - ",e.time,""),i.xp6(2),i.Q6J("ngForOf",n.corsaServices.alerts)}}function y(t,o){if(1&t&&(i.TgZ(0,"ion-accordion-group"),i.YNc(1,M,6,4,"ion-accordion",7),i.qZA()),2&t){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.corsaServices.storici)}}function S(t,o){if(1&t&&(i.TgZ(0,"ion-item")(1,"span")(2,"ion-label",6),i._uU(3),i.qZA()()()),2&t){const e=i.oxw().$implicit;i.xp6(3),i.lnq("Type: ",e.type," - Value: ",e.value," - Time: ",e.time,"")}}function A(t,o){if(1&t&&(i.TgZ(0,"span"),i.YNc(1,S,4,3,"ion-item",3),i.qZA()),2&t){const e=o.$implicit,n=i.oxw(2);i.xp6(1),i.Q6J("ngIf",e.routeId==n.corsaServices.tempID)}}function I(t,o){if(1&t&&(i.TgZ(0,"ion-list"),i.YNc(1,A,2,1,"span",13),i.qZA()),2&t){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.corsaServices.alerts)}}const B=[{path:"",component:(()=>{class t{constructor(e,n,l){this.timer=e,this.corsaServices=n,this.boxServices=l,this.elapsedTime=0,this.startTime=null,this.interval=null,this.storageKey="timerState",this.timerVisibility=!1,this.startAndStop=!0,this.storageBoxVisibility="boxVisibility",this.selectedBox={},this.visibilityBox=!0}ngOnInit(){const e=localStorage.getItem(this.storageKey);if(e){this.timerVisibility=!0,this.visibilityBox=!1,this.selectedBox.boxName=localStorage.getItem(this.storageBoxVisibility);const n=JSON.parse(e),c=Date.now()-n.lastUpdateTime;this.startTime=n.startTime,this.elapsedTime=n.elapsedTime+c,this.start()}}ngOnDestroy(){if(null!==this.interval){const e={startTime:this.startTime,elapsedTime:this.elapsedTime,lastUpdateTime:Date.now()};localStorage.setItem(this.storageKey,JSON.stringify(e)),localStorage.setItem(this.storageBoxVisibility,this.selectedBox.boxName)}else localStorage.removeItem(this.storageKey)}start(){this.corsaServices.startCorsa(this.selectedBox),this.visibilityBox=!1,null===this.interval&&(this.startTime=null===this.startTime?Date.now():Date.now()-this.elapsedTime,this.interval=setInterval(()=>{null!=this.startTime&&(this.elapsedTime=Date.now()-this.startTime)},10)),this.startAndStop=!1}stop(){this.timer.stop(),clearInterval(this.interval),this.interval=null}reset(){this.corsaServices.saveCorsa(this.elapsedTime,this.selectedBox.boxName),this.timer.reset(),clearInterval(this.interval),this.interval=null,this.elapsedTime=0,this.startTime=null,localStorage.removeItem(this.storageKey),localStorage.removeItem(this.storageBoxVisibility),this.visibilityBox=!0,this.timerVisibility=!1}onBoxSelect(e){this.selectedBox=this.boxServices.infoBox(e.target.value),this.timerVisibility=!0,this.startAndStop=!0}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(p.B),i.Y36(u.X),i.Y36(x.R))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-main-page"]],decls:23,vars:6,consts:[[3,"translucent"],["slot","start"],["padding",""],[4,"ngIf"],["placeholder","Select Box",3,"ionChange"],["slot","label"],["color","danger"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["expand","block",3,"click",4,"ngIf"],["expand","block",3,"click"],["slot","header","color","light"],["slot","content",1,""],[4,"ngFor","ngForOf"]],template:function(e,n){1&e&&(i.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),i._UZ(3,"ion-menu-button"),i.qZA(),i.TgZ(4,"ion-title"),i._uU(5,"Menu"),i.qZA()()(),i.TgZ(6,"ion-content",2)(7,"ion-grid")(8,"ion-row")(9,"ion-col")(10,"h2"),i._uU(11," Tempo della corsa "),i.qZA(),i.TgZ(12,"p"),i._uU(13,"Inizia il monitoraggio"),i.qZA(),i.TgZ(14,"ion-list"),i.YNc(15,d,6,1,"ion-item",3),i.qZA(),i.YNc(16,h,3,1,"ion-item",3),i.YNc(17,v,10,6,"span",3),i.qZA()(),i._UZ(18,"br"),i.TgZ(19,"ion-row")(20,"ion-col"),i.YNc(21,y,2,1,"ion-accordion-group",3),i.YNc(22,I,2,1,"ion-list",3),i.qZA()()()()),2&e&&(i.Q6J("translucent",!0),i.xp6(15),i.Q6J("ngIf",n.visibilityBox),i.xp6(1),i.Q6J("ngIf",!n.visibilityBox),i.xp6(1),i.Q6J("ngIf",n.timerVisibility),i.xp6(4),i.Q6J("ngIf",!n.timerVisibility),i.xp6(1),i.Q6J("ngIf",n.timerVisibility&&""!=n.corsaServices.tempID))},dependencies:[r.sg,r.O5,a.We,a.eh,a.YG,a.Sm,a.wI,a.W2,a.jY,a.Gu,a.Ie,a.Q$,a.q_,a.fG,a.Nd,a.t9,a.n0,a.yW,a.wd,a.sr,a.QI,r.uU],styles:["ion-col[_ngcontent-%COMP%]{border:solid 1px #fff;color:#3f3f3f;text-align:center}"]}),t})()}];let N=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[m.Bz.forChild(B),m.Bz]}),t})(),J=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[r.ez,_.u5,a.Pc,N]}),t})()}}]);